{"version":3,"sources":["../../src/pages/admin-registered-user/admin-registered-user.module.ts","../../src/pages/admin-registered-user/admin-registered-user.ts"],"names":[],"mappings":"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","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminRegisteredUserPage } from './admin-registered-user';\n\n@NgModule({\n  declarations: [\n    AdminRegisteredUserPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminRegisteredUserPage),\n  ],\n})\nexport class AdminRegisteredUserPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-registered-user/admin-registered-user.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController, ModalController } from 'ionic-angular';\nimport * as firebase from 'firebase';\nimport 'firebase/firestore';\nimport { AdminViewProfilePage } from '../admin-view-profile/admin-view-profile';\n\n@IonicPage()\n@Component({\n  selector: 'page-admin-registered-user',\n  templateUrl: 'admin-registered-user.html',\n})\nexport class AdminRegisteredUserPage {\n  users: any;\n  usersCount: number = 0;\n  db: any = firebase.firestore();\n  pageLoaded: boolean = false;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams, \n    public alertCtrl: AlertController, \n    public toastCtrl: ToastController, \n    public modalCtrl: ModalController\n  ) {\n  }\n\n  ionViewDidLoad() {\n    this.loadRegisteredUsers();\n    let toast = this.toastCtrl.create({\n      message: 'Slide the list to perform an action',\n      duration: 5000,\n      showCloseButton: true,\n      closeButtonText: 'Ok'\n    });\n\n    toast.present();\n  }\n\n  viewProfile(userId) {\n    let user: object = {\n      userId: userId\n    };\n    let modal = this.modalCtrl.create(AdminViewProfilePage, user);\n\n    modal.onDidDismiss(data => {\n      if (data) {\n        // this.loadProfile();\n      }\n    });\n\n    modal.present();\n  }\n\n  loadRegisteredUsers() {\n    this.db.collection('users').orderBy(\"dateAdded\").limit(1000).onSnapshot(res => {\n      let users = [];\n      res.forEach((doc) => {\n        users.push(doc.data());\n      });\n\n      this.pageLoaded = true;\n      this.users = users;\n    }), (err => {\n      console.log('err', err);\n    });\n  }\n\n  deleteUser(event, uid, name) {\n    event.stopPropagation();\n    console.log('uid', uid);\n\n    let confirm = this.alertCtrl.create({\n      title: 'Delete User?',\n      message: `Are you sure do you want to delete <strong>${name}</strong> user account?`,\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n          }\n        },\n        {\n          text: 'Ok',\n          handler: () => {\n            this.db.collection('users').doc(uid).delete().then(() => {\n              let toast = this.toastCtrl.create({\n                message: 'User was deleted',\n                duration: 4000,\n                position: 'bottom'\n              });\n        \n              toast.present();\n            }).catch(err => {\n              let toast = this.toastCtrl.create({\n                message: err.message,\n                duration: 4000,\n                position: 'bottom'\n              });\n        \n              toast.present();\n            });\n          }\n        }\n      ]\n    });\n    confirm.present();\n\n    return false;\n  }\n\n  editRole(event, uid, name, isAdmin) {\n    event.stopPropagation();\n    \n\n    let confirm = this.alertCtrl.create({\n      title: 'Update user role?',\n      message: `Are you sure do you want to update ${name}'s role in the app?`,\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n          }\n        },\n        {\n          text: 'Ok',\n          handler: () => {\n            if(isAdmin == 1) {\n              isAdmin = 0;\n            }else {\n              isAdmin = 1;\n            }\n            this.db.collection('users').doc(uid).update({\n              isAdmin: isAdmin,\n              adminSwitchUser: isAdmin\n            }).then(() => {\n              let toast = this.toastCtrl.create({\n                message: `${name}'s user role was updated`,\n                duration: 4000,\n                position: 'bottom'\n              });\n\n              toast.present();\n            }).catch(err => {\n              let toast = this.toastCtrl.create({\n                message: err.message,\n                duration: 4000,\n                position: 'bottom'\n              });\n\n              toast.present();\n            });\n          }\n        }\n      ]\n    });\n    confirm.present();\n    \n    return false;\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-registered-user/admin-registered-user.ts"],"sourceRoot":""}