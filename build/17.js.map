{"version":3,"sources":["../../src/pages/admin-lost-pets/admin-lost-pets.module.ts","../../src/pages/admin-lost-pets/admin-lost-pets.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminLostPetsPage } from './admin-lost-pets';\n\n@NgModule({\n  declarations: [\n    AdminLostPetsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminLostPetsPage),\n  ],\n})\nexport class AdminLostPetsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-lost-pets/admin-lost-pets.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, AlertController, ToastController, ActionSheetController } from 'ionic-angular';\nimport { AddLostPetFormPage } from '../add-lost-pet-form/add-lost-pet-form';\nimport { LostpetProvider } from '../../providers/lostpet/lostpet';\nimport * as firebase from 'firebase';\nimport 'firebase/firestore';\nimport { LostPetDetailsPage } from '../lost-pet-details/lost-pet-details';\nimport { EditLostPetPage } from '../edit-lost-pet/edit-lost-pet';\n\n@IonicPage()\n@Component({\n  selector: 'page-admin-lost-pets',\n  templateUrl: 'admin-lost-pets.html',\n})\nexport class AdminLostPetsPage {\n\n  pets: any;\n  petsCount: number = 0;\n  db: any = firebase.firestore();\n  pageLoaded: boolean = false;\n  userId: string = localStorage.getItem('userId');\n  searchFocus: number = 0;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams, \n    public modalCtrl: ModalController,\n    public lostpetProvider: LostpetProvider,\n    public alertCtrl: AlertController,\n    public toastCtrl: ToastController,\n    public actionSheetCtrl: ActionSheetController\n  ) {\n    this.getItems();\n  }\n\n  action(petId, status) {\n    let text = '';\n    if(status == 0) {\n      text = 'Mark as found';\n    }else {\n      text = 'Mark as lost';\n    }\n\n    let actionSheet = this.actionSheetCtrl.create({\n      title: 'Modify your post',\n      buttons: [\n        {\n          text: text,\n          icon: 'checkbox-outline',\n          handler: () => {\n            this.removeLostPet(petId, status);\n          }\n        },{\n          text: 'Edit',\n          icon: 'create',\n          handler: () => {\n            let data: object = {\n              petId: petId\n            };\n            let modal = this.modalCtrl.create(EditLostPetPage, data);\n          \n            modal.onDidDismiss(data => {\n              \n            });\n        \n            modal.present();\n          }\n        },{\n          text: 'Cancel',\n          icon: 'close',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n\n  onSearch(ev: any) {\n    this.pageLoaded = false;\n    let val = ev.target.value;\n\n    this.db.collection('lostpets').orderBy(\"datePosted\", \"desc\").limit(1000).onSnapshot(snapshots => {\n      let pets = [];\n      snapshots.forEach(doc => {\n        let docData = doc.data();\n        docData['lostPetId'] = doc.id\n        pets.push(docData);\n      });\n\n      this.pets = pets;\n      this.petsCount = Object.keys(pets).length;\n\n      if (val && val.trim() != '') {\n        this.pets =  this.pets.filter((el) => {\n          return  (el.name.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\n                  (el.placeLost.toLowerCase().indexOf(val.toLowerCase()) > -1) ||\n                  (el.petType.toLowerCase().indexOf(val.toLowerCase()) > -1)\n        });\n      }\n\n      setTimeout(() => {\n        this.pageLoaded = true;\n      }, 700);\n\n    }),(err => {\n      console.log('err', err);\n    });\n  }\n\n  onCancel(ev: any) {\n    this.getItems();\n  }\n\n  addLostPet() {\n    let modal = this.modalCtrl.create(AddLostPetFormPage);\n\n    modal.onDidDismiss(data => {\n      \n    });\n\n    modal.present();\n  }\n\n  getItems() {\n    this.db.collection('lostpets').orderBy(\"datePosted\", \"desc\").limit(1000).onSnapshot(snapshots => {\n      console.log('snapshots', snapshots);\n      let pets = [];\n      snapshots.forEach(doc => {\n        let docData = doc.data();\n        docData['lostPetId'] = doc.id\n        pets.push(docData);\n      });\n      this.pets = pets;\n      console.log('this.pets', this.pets);\n      this.petsCount = Object.keys(pets).length;\n      this.pageLoaded = true;\n    }),(err => {\n      console.log('err', err);\n    });\n  }\n  \n  lostPetDetails(pet) {\n    console.log('pet', pet);\n    let modal = this.modalCtrl.create(LostPetDetailsPage, pet);\n\n    modal.onDidDismiss(data => {\n      if (data) {\n        // this.loadProfile();\n      }\n    });\n\n    modal.present();\n  }\n\n  removeLostPet(lostPetId, status) {\n    let title = '';\n    let message = '';\n    \n    if(status == 1) {\n      title = 'Pet was lost?';\n      message = 'Are you sure do you want to mark this pet as lost?';\n    }else {\n      title = 'Pet was found?';\n      message = 'Are you sure do you want to mark this pet as found?';\n    }\n\n    let confirm = this.alertCtrl.create({\n      title: title,\n      message: message,\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n          }\n        },\n        {\n          text: 'Ok',\n          handler: () => {\n            this.db.collection('lostpets').doc(lostPetId).update({\n              status: !status\n            });\n\n            let toast = this.toastCtrl.create({\n              message: 'Post was updated',\n              duration: 5000,\n              position: 'bottom'\n            });\n      \n            toast.present();\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  checkFocus() {\n    if(this.searchFocus == 0) {\n      let toast = this.toastCtrl.create({\n        message: 'You can search by pet name, type and breed',\n        showCloseButton: true,\n        duration: 5000,\n        closeButtonText: 'Ok',\n        dismissOnPageChange: true\n      });\n  \n      toast.present();\n    }\n\n    this.searchFocus = 1;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-lost-pets/admin-lost-pets.ts"],"sourceRoot":""}