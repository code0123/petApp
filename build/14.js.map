{"version":3,"sources":["../../src/pages/admin-train-pet/admin-train-pet.module.ts","../../src/pages/admin-train-pet/admin-train-pet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACM;AAUtD;IAAA;IAAsC,CAAC;IAA1B,uBAAuB;QARnC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2EAAiB;aAClB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,2EAAiB,CAAC;aAC5C;SACF,CAAC;OACW,uBAAuB,CAAG;IAAD,8BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZM;AACyF;AAEjD;AAC7C;AACT;AACwC;AAOpE;IAQE,2BACS,OAAsB,EACtB,SAAoB,EACpB,SAA0B,EAC1B,SAA0B,EAC1B,eAAsC,EACtC,SAA0B;QAL1B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,oBAAe,GAAf,eAAe,CAAuB;QACtC,cAAS,GAAT,SAAS,CAAiB;QAZnC,gBAAW,GAAW,CAAC,CAAC;QACxB,OAAE,GAAQ,mDAAkB,EAAE,CAAC;QAC/B,eAAU,GAAY,KAAK,CAAC;QAC5B,WAAM,GAAW,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAChD,YAAO,GAAQ,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;QAUvD,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;IAED,6CAAiB,GAAjB;QAAA,iBAuBC;QAtBC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,mBAAS;YAChI,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,SAAS,CAAC,OAAO,CAAC,aAAG;gBACnB,IAAI,OAAO,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;gBAEzB,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,EAAE;gBAC3B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACvB,CAAC,CAAC,CAAC;YAEH,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,KAAI,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;YAC9C,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC;QAC1C,CAAC,CAAC,EAAE,CAAC,aAAG;YACN,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAChC,OAAO,EAAE,GAAG,CAAC,OAAO;gBACpB,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,QAAQ;aACnB,CAAC,CAAC;YAEH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,6CAAiB,GAAjB;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,sGAAoB,CAAC,CAAC;QAExD,KAAK,CAAC,YAAY,CAAC,cAAI;QAEvB,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,sCAAU,GAAV,UAAW,OAAO;QAAlB,iBAqCC;QApCC,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,KAAK,EAAE,mBAAmB;YAC1B,OAAO,EAAE,+CAA+C;YACxD,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;oBACT,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE;wBACP,KAAI,CAAC,EAAE,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;4BACxD,QAAQ,EAAE,KAAK;yBAChB,CAAC,CAAC,IAAI,CAAC,aAAG;4BACT,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gCAChC,OAAO,EAAE,mBAAmB;gCAC5B,QAAQ,EAAE,IAAI;gCACd,QAAQ,EAAE,QAAQ;6BACnB,CAAC,CAAC;4BAEH,KAAK,CAAC,OAAO,EAAE,CAAC;wBAClB,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;4BACV,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gCAChC,OAAO,EAAE,GAAG,CAAC,OAAO;gCACpB,QAAQ,EAAE,IAAI;gCACd,QAAQ,EAAE,QAAQ;6BACnB,CAAC,CAAC;4BAEH,KAAK,CAAC,OAAO,EAAE,CAAC;wBAClB,CAAC,CAAC,CAAC;oBACL,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,OAAO,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAED,kCAAM,GAAN,UAAO,OAAO;QAAd,iBAmCC;QAlCC,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC5C,KAAK,EAAE,kBAAkB;YACzB,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,OAAO;oBACb,OAAO,EAAE;wBACP,KAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;oBAC3B,CAAC;iBACF,EAAE;oBACD,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,IAAI,IAAI,GAAW;4BACjB,OAAO,EAAE,OAAO;yBACjB,CAAC;wBACF,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,wFAAgB,EAAE,IAAI,CAAC,CAAC;wBAE1D,KAAK,CAAC,YAAY,CAAC,cAAI;wBAEvB,CAAC,CAAC,CAAC;wBAEH,KAAK,CAAC,OAAO,EAAE,CAAC;oBAClB,CAAC;iBACF,EAAE;oBACD,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,OAAO;oBACb,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,WAAW,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAjIU,iBAAiB;QAJ7B,wEAAS,CAAC;YACT,QAAQ,EAAE,sBAAsB;WACG;SACpC,CAAC;6EAU+B;YACX,sEAAS;YACT,sEAAe;YACf,4EAAe;YACT,wEAAqB;YAC3B,cAAe;OAdxB,iBAAiB,CAkI7B;IAAD,CAAC;AAAA;SAlIY,iBAAiB,iB","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminTrainPetPage } from './admin-train-pet';\n\n@NgModule({\n  declarations: [\n    AdminTrainPetPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminTrainPetPage),\n  ],\n})\nexport class AdminTrainPetPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-train-pet/admin-train-pet.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, ToastController, ActionSheetController, AlertController } from 'ionic-angular';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { AdminAddTrainPetPage } from '../admin-add-train-pet/admin-add-train-pet';\nimport * as firebase from 'firebase';\nimport 'firebase/firestore';\nimport { EditTrainPetPage } from '../edit-train-pet/edit-train-pet';\n\n@IonicPage()\n@Component({\n  selector: 'page-admin-train-pet',\n  templateUrl: 'admin-train-pet.html',\n})\nexport class AdminTrainPetPage {\n  videos: any;\n  videosCount: number = 0;\n  db: any = firebase.firestore();\n  pageLoaded: boolean = false;\n  userId: string = localStorage.getItem('userId');\n  isAdmin: any = parseInt(localStorage.getItem('isAdmin'));\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    public actionSheetCtrl: ActionSheetController,\n    public alertCtrl: AlertController\n  ) {\n    this.getTrainPetVideos();\n    console.log('type', this.isAdmin);\n  }\n\n  getTrainPetVideos() {\n    this.db.collection('trainpetsvideos').where(\"isactive\", \"==\", true).orderBy(\"datePosted\", \"desc\").limit(1000).onSnapshot(snapshots => {\n      let videos = [];\n      snapshots.forEach(doc => {\n        let docData = doc.data();\n\n        docData['videoId'] = doc.id\n        videos.push(docData);\n      });\n\n      this.videos = videos;\n      this.videosCount = Object.keys(videos).length;\n      this.pageLoaded = true;\n      console.log('this.videos', this.videos);\n    }), (err => {\n      let toast = this.toastCtrl.create({\n        message: err.message,\n        duration: 5000,\n        position: 'bottom'\n      });\n\n      toast.present();\n    });\n  }\n\n  addTrainPetVideos() {\n    let modal = this.modalCtrl.create(AdminAddTrainPetPage);\n\n    modal.onDidDismiss(data => {\n\n    });\n\n    modal.present();\n  }\n\n  removePost(videoId) {\n    let confirm = this.alertCtrl.create({\n      title: 'Remove this post?',\n      message: 'Are you sure do you want to remove your post?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n          }\n        },\n        {\n          text: 'Ok',\n          handler: () => {\n            this.db.collection('trainpetsvideos').doc(videoId).update({\n              isactive: false\n            }).then(res => {\n              let toast = this.toastCtrl.create({\n                message: 'Video was deleted',\n                duration: 5000,\n                position: 'bottom'\n              });\n\n              toast.present();\n            }).catch(err => {\n              let toast = this.toastCtrl.create({\n                message: err.message,\n                duration: 5000,\n                position: 'bottom'\n              });\n\n              toast.present();\n            });\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  action(videoId) {\n    let actionSheet = this.actionSheetCtrl.create({\n      title: 'Modify your post',\n      buttons: [\n        {\n          text: 'Remove',\n          icon: 'trash',\n          handler: () => {\n            this.removePost(videoId);\n          }\n        }, {\n          text: 'Edit',\n          icon: 'create',\n          handler: () => {\n            let data: object = {\n              videoId: videoId\n            };\n            let modal = this.modalCtrl.create(EditTrainPetPage, data);\n\n            modal.onDidDismiss(data => {\n\n            });\n\n            modal.present();\n          }\n        }, {\n          text: 'Cancel',\n          icon: 'close',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-train-pet/admin-train-pet.ts"],"sourceRoot":""}