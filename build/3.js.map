{"version":3,"sources":["../../src/pages/searchvet/searchvet.module.ts","../../src/pages/searchvet/searchvet.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SearchvetPage } from './searchvet';\n\n@NgModule({\n  declarations: [\n    SearchvetPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SearchvetPage),\n  ],\n})\nexport class SearchvetPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/searchvet/searchvet.module.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { Geolocation, GeolocationOptions, Geoposition, PositionError } from '@ionic-native/geolocation'; \nimport { PlaceDetailPage } from '../place-detail/place-detail';\n\ndeclare var google;\n\n@IonicPage()\n@Component({\n  selector: 'page-searchvet',\n  templateUrl: 'searchvet.html',\n})\nexport class SearchvetPage {\n  options: GeolocationOptions;\n  currentPos: Geoposition;\n  places: Array<any>; \n  @ViewChild('map') mapElement: ElementRef;\n  map: any;\n  pageLoaded: boolean = false;\n\n  constructor(public navCtrl: NavController, private geolocation: Geolocation, public modalCtrl: ModalController) {}\n\n  ionViewDidEnter() {\n    setTimeout(() => {\n      this.getUserPosition();\n    }, 400);\n  }  \n\n  getVetClinic(latLng) {\n    var service = new google.maps.places.PlacesService(this.map);\n    let request = {\n      location: latLng,\n      radius: 8047,\n      types: [\"veterinary_care\"]\n    };\n    return new Promise((resolve, reject) => {\n      service.nearbySearch(request, (results, status) => {\n        if (status === google.maps.places.PlacesServiceStatus.OK) {\n          this.pageLoaded = true;\n          resolve(results);\n        } else {\n          reject(status);\n        }\n\n      });\n    });\n  }\n\n  getUserPosition() {\n    this.options = {\n      enableHighAccuracy: true\n    };\n\n    this.geolocation.getCurrentPosition(this.options).then((pos: Geoposition) => {\n      this.currentPos = pos;\n      this.addMap(pos.coords.latitude, pos.coords.longitude);\n    }, (err: PositionError) => {\n      console.log(\"error : \" + err.message);\n    });\n  }\n\n  addMap(lat, long) {\n    let latLng = new google.maps.LatLng(lat, long);\n\n    let mapOptions = {\n      center: latLng,\n      zoom: 12,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    }\n\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n\n    this.getVetClinic(latLng).then((results: Array<any>) => {\n      this.places = results;\n      for (let i = 0; i < results.length; i++) {\n        this.createMarker(results[i]);\n      }\n    }, (status) => console.log(status));\n\n    this.addMarker();\n  }\n\n  createMarker(place) {\n    let marker = new google.maps.Marker({\n      map: this.map,\n      animation: google.maps.Animation.DROP,\n      position: place.geometry.location\n    });\n    let placeName = place.name;\n    let vicinity = place.vicinity;\n\n\n\n    let content = `${placeName} (${vicinity})`;\n    let infoWindow = new google.maps.InfoWindow({\n      content: content\n    });\n\n    google.maps.event.addListener(marker, 'click', () => {\n      infoWindow.open(this.map, marker);\n    });\n  } \n\n  addMarker() {\n    let marker = new google.maps.Marker({\n      map: this.map,\n      animation: google.maps.Animation.DROP,\n      position: this.map.getCenter()\n    });\n\n    let content = \"<p>This is your current position !</p>\";\n    let infoWindow = new google.maps.InfoWindow({\n      content: content\n    });\n\n    google.maps.event.addListener(marker, 'click', () => {\n      infoWindow.open(this.map, marker);\n    });\n  }\n\n  placeDetail(place) {\n    let modal = this.modalCtrl.create(PlaceDetailPage, place);\n\n    modal.onDidDismiss(data => {\n      if (data) {\n        // this.loadProfile();\n      }\n    });\n\n    modal.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/searchvet/searchvet.ts"],"sourceRoot":""}